select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/"), tolower(ConstituencyCode))
hkdc
hkdc %>% glimpse()
hkdc <-
file2 %>%
select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/", tolower(ConstituencyCode)))
hkdc %>% glimpse()
hkdc <-
file2 %>%
select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/", tolower(ConstituencyCode))) %>%
rename(WebsiteURL = "Website")
hkdc %>% glimpse()
usethis::use_data(hkdc)
hkdc %>% names() %>% enframe()
roxygen2::roxygenise()
roxygen2::roxygenise()
roxygen2::roxygenise()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::install()
usethis::use_github_action()
?use_github_action
library(hkdatasets)
hkdc
hkdc %>% head()
head(hkdc)
library(tidyverse)
hkdc %>% as_tibble()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
usethis::use_pkgdown()
pkgdown::build_site()
vignette("pkgdown")
usethis::use_github_action("pkgdown")
devtools::check()
roxygen2::roxygenise()
pkgdown::build_site()
usethis::use_github_action("pkgdown")
usethis::use_pkgdown()
usethis::use_pkgdown(config_file = "_pkgdown.yml")
pkgdown::build_site()
usethis::use_pkgdown()
pkgdown::build_reference_index()
usethis::use_pkgdown()
pkgdown::init_site()
pkgdown::build_site()
library(tidyverse)
file1 <- read_csv(here::here(".dev", "DC-contact.csv"))
file2 <- readxl::read_xlsx(here::here(".dev", "HKDC Map_withDClinks2Final.xlsx"))
file3 <- read_csv(here::here(".dev", "scraped-data.csv"))
file3
# file2 %>% glimpse()
file3_clean <-
file3 %>%
select(electionYear,
electionDate,
candidateNum,
occupation,
political_camp = "political camp",
vote,
votePercentage,
name,
gender,
tag,
avatar)
file3 %>% names()
# file2 %>% glimpse()
file3_clean <-
file3 %>%
select(electionYear,
electionDate,
candidateNum,
occupation,
political,
camp,
vote,
votePercentage,
name,
gender,
tag,
avatar)
file3_clean
hkdc <-
file2 %>%
select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/", tolower(ConstituencyCode))) %>%
rename(WebsiteURL = "Website") %>%
left_join(file3, by = c("DC_ZH" = "name"))
hkdc
hkdc %>% glimpse()
hkdc %>% skimr::skim()
hkdc$tag
# file2 %>% glimpse()
file3_clean <-
file3 %>%
select(ElectionYear = "electionYear",
ElectionDate = "electionDate",
CandidateNum = "candidateNum",
Occupation = "occupation",
Political = "political",
Camp = "camp",
Vote = "vote",
VotePercentage = "votePercentage",
name,
Gender = "gender",
Tag = "tag")
hkdc <-
file2 %>%
select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/", tolower(ConstituencyCode))) %>%
rename(WebsiteURL = "Website") %>%
left_join(file3, by = c("DC_ZH" = "name"))
hkdc %>% View()
# file2 %>% glimpse()
file3_clean <-
file3 %>%
select(ElectionYear = "electionYear",
ElectionDate = "electionDate",
CandidateNum = "candidateNum",
Occupation = "occupation",
Political = "political",
Camp = "camp",
Vote = "vote",
VotePercentage = "votePercentage",
name,
Gender = "gender",
Tag = "tag")
hkdc <-
file2 %>%
select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/", tolower(ConstituencyCode))) %>%
rename(WebsiteURL = "Website") %>%
left_join(file3, by = c("DC_ZH" = "name"))
hkdc %>% View()
# file2 %>% glimpse()
file3_clean <-
file3 %>%
select(ElectionYear = "electionYear",
ElectionDate = "electionDate",
CandidateNum = "candidateNum",
Occupation = "occupation",
Political = "political",
Camp = "camp",
Vote = "vote",
VotePercentage = "votePercentage",
name,
Gender = "gender",
Tag = "tag")
hkdc <-
file2 %>%
select(ConstituencyCode,
Constituency_ZH,
Constituency_EN,
District_ZH,
District_EN,
Region_ZH,
Region_EN,
Party_ZH,
Party_EN,
DC_ZH,
DC_EN,
FacebookURL = "facebook",
DCPageURL = "dc_links_col2") %>%
left_join(file1, by = "ConstituencyCode") %>%
mutate(DCProjectPageURL = paste0("https://hong-kong-districts-info.github.io/dc/", tolower(ConstituencyCode))) %>%
rename(WebsiteURL = "Website") %>%
left_join(file3_clean, by = c("DC_ZH" = "name"))
hkdc %>% View()
usethis::use_data(hkdc)
usethis::use_data(hkdc, overwrite = TRUE)
names(hkdc)
hkdc$Political
hkdc$Camp
hkdc$Tag
roxygen2::roxygenise()
devtools::check()
names(hkdc)
roxygen2::roxygenise()
devtools::check()
hkdc
hkdc %>%
ggplot(aes(x = DC_ZH, y = Vote)) +
geom_col()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = DC_ZH, y = Vote)) +
geom_col()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
geom_text()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
geom_text(aes(label = Vote))
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
geom_text(aes(label = Vote), vjust = 1)
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
geom_text(aes(label = Vote), vjust = -1)
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), vjust = -1)
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -1)
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
x = "Elected District Councillors") +
ggthemes::theme_solarized_2()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
x = "Elected District Councillors") +
ggthemes::fivethirtyeight()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
x = "Elected District Councillors") +
ggthemes::fivethirtyeight_pal()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
subtitle = "2019 Hong Kong District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
hkdc %>%
arrange(-Vote) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote, fill = Camp)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
subtitle = "2019 Hong Kong District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
hkdc %>%
arrange(-Vote) %>%
slice(1:20) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote, fill = Camp)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.5) +
labs(title = "Number of votes won in District Council election",
subtitle = "2019 Hong Kong District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
hkdc %>%
arrange(-Vote) %>%
slice(1:20) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote, fill = Camp)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.25) +
labs(title = "Number of votes won in District Council election",
subtitle = "2019 Hong Kong District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
hkdc %>%
arrange(-Vote) %>%
slice(1:20) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote, fill = Party)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.25) +
labs(title = "Number of votes won in District Council election",
subtitle = "2019 Hong Kong District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
hkdc
hkdc %>%
arrange(-Vote) %>%
slice(1:20) %>%
ggplot(aes(x = reorder(DC_ZH, Vote), y = Vote, fill = Party_ZH)) +
geom_col() +
coord_flip() +
geom_text(aes(label = Vote), hjust = -0.25) +
labs(title = "Number of votes won in District Council election",
subtitle = "2019 Hong Kong District Council election",
x = "Elected District Councillors") +
ggthemes::theme_fivethirtyeight()
file_acc <- readxl::read_xlsx(here::here(".dev", "data", "Accident 2014-2019.xlsx"))
file_veh <- readxl::read_xlsx(here::here(".dev", "data", "Vehicle 2014-2019.xlsx"))
file_cas <- readxl::read_xlsx(here::here(".dev", "data", "Casuality 2014-2019.xlsx"))
file_acc
install.packages("HK80")
library(HK80)
attach_latlong <- function(data, gridn, gride){
grid_n <- data[[gridn]]
grid_e <- data[[gride]]
results <- HK80::HK1980GRID_TO_WGS84GEO(grid_n, grid_e)
cbind(data, results)
}
file_acc2 <- attach_latlong("GRID_N", "GRID_E")
file_acc2 <- attach_latlong(file_acc, "GRID_N", "GRID_E")
attach_latlong <- function(data, gridn, gride){
data <- tidyr::drop_na(data)
grid_n <- data[[gridn]]
grid_e <- data[[gride]]
results <- HK80::HK1980GRID_TO_WGS84GEO(grid_n, grid_e)
cbind(data, results)
}
file_acc2 <- attach_latlong(file_acc, "GRID_N", "GRID_E")
file_acc2 <- attach_latlong(file_acc, "Grid_N", "Grid_E")
file_acc2 <- attach_latlong(file_acc, "Grid_N", "Grid_E")
attach_latlong <- function(data, gridn, gride){
data <- tidyr::drop_na(data)
grid_n <- data[[gridn]]
grid_e <- data[[gride]]
results <- HK80::HK1980GRID_TO_WGS84GEO(grid_n, grid_e)
cbind(data, results)
}
file_acc2 <- attach_latlong(file_acc, "Grid_N", "Grid_E")
file_acc$Grid_E
iris[["Species"]]
attach_latlong <- function(data, gridn, gride){
data <-
data %>%
mutate_at(vars(gridn, gride),
~ifelse(. == "NA", NA, .) %>%
as.numeric())
# data <- tidyr::drop_na(data)
grid_n <- data[[gridn]]
grid_e <- data[[gride]]
results <- HK80::HK1980GRID_TO_WGS84GEO(grid_n, grid_e)
cbind(data, results)
}
file_acc2 <- attach_latlong(file_acc, "Grid_N", "Grid_E")
attach_latlong <- function(data, gridn, gride){
data <-
data %>%
mutate_at(vars(gridn, gride),
~ifelse(. == "NA", NA, .) %>%
as.numeric())
# data <- tidyr::drop_na(data)
grid_n <- data[[gridn]]
grid_e <- data[[gride]]
suppressWarnings(
results <- HK80::HK1980GRID_TO_WGS84GEO(grid_n, grid_e)
)
cbind(data, results)
}
file_acc2 <- attach_latlong(file_acc, "Grid_N", "Grid_E")
file_acc2
hk_accidents <- attach_latlong(file_acc, "Grid_N", "Grid_E")
hk_vehicles <- attach_latlong(file_veh, "Grid_N", "Grid_E")
hk_vehicles <- file_veh
hk_casualties <- attach_latlong(file_cas, "Grid_N", "Grid_E")
hk_casualties <- file_cas
hk_accidents
hk_vehicles
hk_casualties
usethis::use_data(hk_accidents, overwrite = TRUE)
usethis::use_data(hk_vehicles, overwrite = TRUE)
usethis::use_data(hk_casualties, overwrite = TRUE)
hk_accidents %>% names() %>% enframe()
hk_accidents %>% names() %>% enframe() %>% print()
hk_accidents %>% names() %>% enframe() %>% head(21)
hk_accidents %>% names() %>% enframe() %>% View()
hk_accidents %>% names() %>% enframe() %>% wpa::export()
hk_vehicles %>% glimpse()
hk_casualties %>% names() %>% enframe() %>% wpa::export()
hk_vehicles %>% names() %>% enframe() %>% wpa::export()
roxygen2::roxygenise()
devtools::check()
pkgdown::build_site()
