suppressWarnings(
results <- HK80::HK1980GRID_TO_WGS84GEO(grid_n, grid_e)
)
cbind(data, results)
}
file_acc2 <- attach_latlong(file_acc, "Grid_N", "Grid_E")
file_acc2
hk_accidents <- attach_latlong(file_acc, "Grid_N", "Grid_E")
hk_vehicles <- attach_latlong(file_veh, "Grid_N", "Grid_E")
hk_vehicles <- file_veh
hk_casualties <- attach_latlong(file_cas, "Grid_N", "Grid_E")
hk_casualties <- file_cas
hk_accidents
hk_vehicles
hk_casualties
usethis::use_data(hk_accidents, overwrite = TRUE)
usethis::use_data(hk_vehicles, overwrite = TRUE)
usethis::use_data(hk_casualties, overwrite = TRUE)
hk_accidents %>% names() %>% enframe()
hk_accidents %>% names() %>% enframe() %>% print()
hk_accidents %>% names() %>% enframe() %>% head(21)
hk_accidents %>% names() %>% enframe() %>% View()
hk_accidents %>% names() %>% enframe() %>% wpa::export()
hk_vehicles %>% glimpse()
hk_casualties %>% names() %>% enframe() %>% wpa::export()
hk_vehicles %>% names() %>% enframe() %>% wpa::export()
roxygen2::roxygenise()
devtools::check()
pkgdown::build_site()
library(hkdatasets)
load("/Users/gabrieltam/Documents/GitHub/hkdatasets/data/hkdc.rda")
View(hkdc)
library(tidyverse)
rm(hkdc)
library(here)
# Read data---------------------------------------------------------------------
load(here("data", "hkdc.rda"))
library(renv)
renv::init()
renv::snapshot()
View(hkdc)
glimpse(hkdc)
library(hkdc)
devtools::install("hkdatasets")
devtools::install(pkg = "hkdatasets")
devtools::install_github("Hong-Kong-Districts-Info/hkdatasets")
library(hkdatasets)
?hkdc
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc %>%
rename(Political_ZH = Political)
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc %>%
rename(Political_ZH = Political) %>%
view()
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc <- hkdc %>%
rename(Political_ZH = Political)
View(hkdc)
summary(hkdc$Political_ZH)
inspectdf::show_plot(inspectdf::inspect_cat(hkdc))
install.packages("inspectdf")
inspectdf::show_plot(inspectdf::inspect_cat(hkdc))
install.packages("showtext")
# Load font ---------------------------------------------------------------
showtext::showtext_auto()
levels(hkdc$Political_ZH)
count(hkdc$Political_ZH)
hkdc %>%
count(Political_ZH)
df1 <- data.frame(v1 = sample(10:30, 20, replace = TRUE))
View(df1)
df1 <- data.frame(v1 = sample(10:30, 20, replace = TRUE))
count(Political_ZH)
count(hkdc$Political_ZH)
count(hkdc, Political_ZH)
## Create translation table
Political_trans <- data.frame(ZH = count(hkdc, Political_ZH))
View(Political_trans)
View(hkdc)
rm(df1)
rm(Political_trans)
## Translate
count(hkdc, camp)
## Translate
count(hkdc, camp)
## Translate
count(hkdc, Camp)
## Translate
count(hkdc, Gender)
## Translate
count(hkdc, Tag)
## Read in English translation
Political_EN <- load(here("dev", "data", "Political_EN"))
## Read in English translation
Political_EN <- load(here("dev", "data", "Political_EN.csv"))
## Read in English translation
Political_EN <- load(here("dev", "data", "Political_EN.csv"))
## Read in English translation
Political_EN <- read.csv(here("dev", "data", "Political_EN.csv"))
View(Political_EN)
left_join(Political_EN, by = c("Political_ZH" = "ZH")
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"))
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"))
View(hkdc)
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH")) %>%
rename(Political_EN = EN)
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH")) %>%
rename(Political_EN = EN)
str(hkdc)
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH")) %>%
rename(Political_EN = EN)
## Read in English translation
Political_EN <- read.csv(here("dev", "data", "Political_EN.csv"))
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH")) %>%
rename(Political_EN = EN)
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH")) %>%
rename(Political_EN = "EN")
# Read data---------------------------------------------------------------------
load(here("data", "hkdc.rda"))
load(here("data", "hkdc.rda"))
View(hkdc)
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), suffix = c("", "Political_"))
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), prefix = c("", "Political_"))
rm(hkdc)
# Read data---------------------------------------------------------------------
load(here("data", "hkdc.rda"))
library(here)
# Read data---------------------------------------------------------------------
load(here("data", "hkdc.rda"))
# Read data---------------------------------------------------------------------
load(here("data", "hkdc.rda"))
# Read data---------------------------------------------------------------------
load(here("data", "hkdc.rda"))
# Load packages-----------------------------------------------------------------
library(tidyverse)
library(here)
library(hkdatasets)
# Load font ---------------------------------------------------------------
showtext::showtext_auto()
# Read data---------------------------------------------------------------------
hkdc1 <- load(here("data", "hkdc.rda"))
View(hkdc)
# Read data---------------------------------------------------------------------
hkdc <- load(here("data", "hkdc.rda"))
rm(hkdc)
rm(hkdc1)
hkdc <- load(here("data", "hkdc.rda"))
rm(hkdc)
# Read data---------------------------------------------------------------------
hkdc <- read_file(here("data", "hkdc.rda"))
rm(hkdc)
# Read data---------------------------------------------------------------------
hkdc1 <- read_file(here("data", "hkdc.rda"))
# Read data---------------------------------------------------------------------
hkdc1 <- load(here("data", "hkdc.rda"))
rm(hkdc1)
hkdc1 <- hkdc
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc1 <- hkdc1 %>%
rename(Political_ZH = Political)
## Read in English translation
Political_EN <- read.csv(here("dev", "data", "Political_EN.csv"))
## Translate
hkdc1 <- hkdc1 %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), prefix = c("", "Political_"))
View(hkdc1)
## Translate
hkdc1 <- hkdc1 %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), prefix = c("", "Political_")) %>%
rename(Political_EN = EN)
## Translate
hkdc1 <- hkdc1 %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), prefix = c("", "Political_")) %>%
rename(Political_EN = 'EN')
glimpse(hkdc1)
hkdc1 %>%
rename(Political_EN = 'EN')
hkdc1 %>%
rename(Political_EN = 'EN') %>%
View
hkdc1 <- hkdc1 %>%
rename(Political_EN = 'EN') %>%
relocate(Political_EN, .after = Political_ZH)
View(hkdc1)
rm(hkdc1)
hkdc1 <- hkdc
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc1 <- hkdc1 %>%
rename(Political_ZH = Political)
hkdc1 <- hkdc1 %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), prefix = c("", "Political_")) %>%
rename(Political_EN = 'EN') %>%
relocate(Political_EN, .after = Political_ZH)
# Translate 'Camp'--------------------------------------------------------------
hkdc1 <- hkdc1 %>%
rename(Camp_ZH = Camp)
count(hkdc1$Camp_ZH)
class(hkdc1)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
count(hkdc1$Camp_ZH)
hkdc1 %>%
count(Camp_ZH)
hkdc1 %>%
count(Party_EN)
## Translate
hkdc1 <- hkdc %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp+ZH == "泛民" ~ "Pro-democracy",
TRUE ~ NA
))
## Translate
hkdc1 <- hkdc %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ NA
))
# Translate 'Camp'--------------------------------------------------------------
## Rename "Camp"
hkdc1 <- hkdc1 %>%
rename(Camp_ZH = Camp)
hkdc1 <- hkdc %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ NA
))
hkdc1 <- as.data.frame(hkdc)
hkdc1 <- as.data.frame(hkdc)
View(hkdc1)
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc1 <- hkdc1 %>%
rename(Political_ZH = Political)
class(hkdc)
class(hkdc1)
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc1 <- hkdc1 %>%
rename(Political_ZH = Political)
## Translate
hkdc1 <- hkdc1 %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH"), prefix = c("", "Political_")) %>%
rename(Political_EN = 'EN') %>%
relocate(Political_EN, .after = Political_ZH)
# Translate 'Camp'--------------------------------------------------------------
## Rename "Camp"
hkdc1 <- hkdc1 %>%
rename(Camp_ZH = Camp)
## Translate
hkdc1 <- hkdc %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ NA
))
## Translate
hkdc1 <- hkdc1 %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ NA
))
hkdc1 <- hkdc1 %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ NA
))
## Translate
hkdc1 <- hkdc1 %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ "NA"
))
View(hkdc1)
## Translate
hkdc1 <- hkdc1 %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ "NA"
)) %>%
relocate(Camp_EN, .after = Camp_ZH)
hkdc1 %>%
count(Gender)
class(hkdc1$Gender)
F
# Translate 'Gender'------------------------------------------------------------
## Rename "Gender"
hkdc1 <- hkdc1 %>%
rename(Gender_ZH = Gender)
## Translate
hkdc1 <- hkdc1 %>%
mutate(Gender_EN = case_when(
Gender_ZH == "女" ~ "Female",
Gender_ZH == "男" ~ "Male",
TRUE ~ "NA"
)) %>%
relocate(Camp_EN, .after = Camp_ZH)
## Translate
hkdc1 <- hkdc1 %>%
mutate(Gender_EN = case_when(
Gender_ZH == "女" ~ "Female",
Gender_ZH == "男" ~ "Male",
TRUE ~ "NA"
)) %>%
relocate(Gender_EN, .after = Gender_ZH)
hkdc1 %>%
count(Tag)
# Translate 'Tag'---------------------------------------------------------------
## Rename "Gender"
hkdc1 <- hkdc1 %>%
rename(Tag_ZH = Tag)
# Translate 'Tag'---------------------------------------------------------------
## Rename "Gender"
hkdc1 <- hkdc1 %>%
rename(Tag_ZH = Tag) %>%
mutate(Tag_ZH = case_when(
Tag_ZH == "泛民獨立\n" ~ "泛民獨立",
TRUE ~ Tag_ZH
))
hkdc1 <- hkdc1 %>%
rename(Tag_ZH = Tag) %>%
mutate(Tag_ZH = case_when(
Tag_ZH == "泛民獨立\n" ~ "泛民獨立",
TRUE ~ Tag_ZH
))
hkdc1 <- hkdc1 %>%
#rename(Tag_ZH = Tag) %>%
mutate(Tag_ZH = case_when(
Tag_ZH == "泛民獨立\n" ~ "泛民獨立",
TRUE ~ Tag_ZH
))
hkdc1 %>%
count(Tag)
hkdc1 %>%
count(Tag_ZH)
?hkdc
## Translate
hkdc1 <- hkdc1 %>%
mutate(Tag_EN = case_when(
Tag_ZH == "中間路線" ~ "Centrist Camp",
Tag_ZH == "其他" ~ "Others",
Tag_ZH == "建制政黨" ~ "Pro-Beijing Camp/ Party member",
Tag_ZH == "建制獨立" ~ "Pro-Beijing Camp/ Independent",
Tag_ZH == "泛民政黨" ~ "Pro-democracy Camp/ Party member",
Tag_ZH == "泛民獨立" ~ "Pro-democracy Camp/ Independent",
TRUE ~ "NA"
)) %>%
relocate(Tag_EN, .after = Tag_ZH)
# Translate 'Political'---------------------------------------------------------
## Rename 'Political'
hkdc <- hkdc %>%
rename(Political_ZH = Political)
## Translate
hkdc <- hkdc %>%
left_join(Political_EN, by = c("Political_ZH" = "ZH")) %>%
rename(Political_EN = 'EN') %>%
relocate(Political_EN, .after = Political_ZH)
# Translate 'Camp'--------------------------------------------------------------
## Rename "Camp"
hkdc <- hkdc %>%
rename(Camp_ZH = Camp)
## Translate
hkdc <- hkdc %>%
mutate(Camp_EN = case_when(
Camp_ZH == "其他" ~ "Others",
Camp_ZH == "建制" ~ "Pro-Beijing",
Camp_ZH == "泛民" ~ "Pro-democracy",
TRUE ~ "NA"
)) %>%
relocate(Camp_EN, .after = Camp_ZH)
# Translate 'Gender'------------------------------------------------------------
## Rename "Gender"
hkdc <- hkdc %>%
rename(Gender_ZH = Gender)
## Translate
hkdc <- hkdc %>%
mutate(Gender_EN = case_when(
Gender_ZH == "女" ~ "Female",
Gender_ZH == "男" ~ "Male",
TRUE ~ "NA"
)) %>%
relocate(Gender_EN, .after = Gender_ZH)
# Translate 'Tag'---------------------------------------------------------------
## Rename "Gender"
hkdc <- hkdc %>%
rename(Tag_ZH = Tag) %>%
mutate(Tag_ZH = case_when(
Tag_ZH == "泛民獨立\n" ~ "泛民獨立",
TRUE ~ Tag_ZH
))
## Translate
hkdc <- hkdc %>%
mutate(Tag_EN = case_when(
Tag_ZH == "中間路線" ~ "Centrist Camp",
Tag_ZH == "其他" ~ "Others",
Tag_ZH == "建制政黨" ~ "Pro-Beijing Camp/ Party member",
Tag_ZH == "建制獨立" ~ "Pro-Beijing Camp/ Independent",
Tag_ZH == "泛民政黨" ~ "Pro-democracy Camp/ Party member",
Tag_ZH == "泛民獨立" ~ "Pro-democracy Camp/ Independent",
TRUE ~ "NA"
)) %>%
relocate(Tag_EN, .after = Tag_ZH)
count(hkdc$Camp_Zh)
hkdc %>%
count(Political_ZH)
hkdc %>%
count(Political_ZH, Political_EN)
hkdc %>%
count(Political_ZH, Political_EN) %>%
view()
hkdc %>%
count(Camp_ZH, Camp_EN) %>%
view()
hkdc %>%
count(Gender_ZH, Gender_EN) %>%
view()
hkdc %>%
count(Tag_ZH, Tag_EN) %>%
view()
# Save dataset------------------------------------------------------------------
save(hkdc, file = "mydata.rda")
load("mydata.rda")
rm(hkdc1)
View(hkdc)
load(here("mydata.rda"))
load("/Users/gabrieltam/Documents/GitHub/hkdatasets/mydata.rda")
load("/Users/gabrieltam/Documents/GitHub/hkdatasets/mydata.rda")
View(hkdc)
# Save dataset------------------------------------------------------------------
save(hkdc, file = "hkdc.rda")
View(hkdc)
rm(hkdc)
load("/Users/gabrieltam/Documents/GitHub/hkdatasets/data/hkdc.rda")
renv::snapshot()
library(hkdatasets)
?hkdc
hkdc1 <- hkdc
View(hkdc1)
load("/Users/gabrieltam/Documents/GitHub/hkdatasets/data/hkdc.rda")
View(hkdc)
str(hkdc)
roxygen2::roxygenise()
devtools::check()
library(here)
getwd()
devtools::install("hkdatasets")
devtools::install_github(here("hkdatasets"))
devtools::install(here("hkdatasets"))
devtools::install(here("hkdatasets"))
devtools::install()
library(hkdatasets)
?hkdc
hkdc
hkdc1 <- hkdc
View(hkdc1)
count(hkdc$Party_ZH)
library(tidyverse)
count(hkdc$Party_ZH)
count(hkdc$Party_ZH)
?hkdc1
load("/Users/gabrieltam/Documents/GitHub/hkdatasets/data/hkdc.rda")
usethis::use_data()
hkdc <- load(hkdc)
hkdc <- hkdc
usethis::use_data()
roxygen2::roxygenise()
getwd()
devtools::check()
?hkdc
